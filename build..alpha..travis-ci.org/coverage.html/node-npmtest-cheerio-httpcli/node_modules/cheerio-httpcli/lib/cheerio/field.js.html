<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-cheerio-httpcli/node_modules/cheerio-httpcli/lib/cheerio/field.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-cheerio-httpcli">npmtest-cheerio-httpcli (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-cheerio-httpcli/node_modules/cheerio-httpcli/lib/cheerio/field.js</span></h1>
    <h2>
        
        Statements: <span class="metric">5.81% <small>(5 / 86)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 70)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">11.11% <small>(1 / 9)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">5.81% <small>(5 / 86)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-cheerio-httpcli/node_modules/cheerio-httpcli/lib/cheerio/</a> &#187; field.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*eslint no-invalid-this:0*/
/*jshint -W100*/
&nbsp;
'use strict';
&nbsp;
var typeOf = require('type-of');
var each   = require('foreach');
var cutil  = require('./util');
&nbsp;
module.exports = function (encoding, client, cheerio) {
  /**
   * フォーム内部品の値取得/設定
   *
   * jQueryの$().attrや$().cssと同じ使用感
   * 1. nameのみ指定した場合はそのname部品の値を取得
   * 2. name, valueを指定した場合はそのname部品の値をvalueに設定
   * 3. valueに関数を指定した場合はその関数の戻り値をname部品の値に設定
   * 4. nameに文字列でなくname:valueの連想配列を指定した場合は複数要素をまとめて設定
   *
   * @param name       対象のフォーム部品のname or name: valueの連想配列
   * @param value      設定する値 or 値を返す関数 or undefined
   * @param onNotFound 指定したnameの要素が見つからない場合の挙動('throw', 'append')
   * @return 1: name部品の値 or 2-4: this(メソッドチェーン用)
   */
  cheerio.prototype.field = <span class="fstat-no" title="function not covered" >function (name, value, onNotFound) {</span>
<span class="cstat-no" title="statement not covered" >    var $ = cheerio;</span>
<span class="cstat-no" title="statement not covered" >    var $form = null;</span>
&nbsp;
    // form要素でなければエラー
<span class="cstat-no" title="statement not covered" >    if (this.length === 0) {</span>
<span class="cstat-no" title="statement not covered" >      throw new Error('no elements');</span>
    }
&nbsp;
    // 複数ある場合は先頭のフォームのみ
<span class="cstat-no" title="statement not covered" >    $form = this.eq(0);</span>
<span class="cstat-no" title="statement not covered" >    if (! $form.is('form')) {</span>
<span class="cstat-no" title="statement not covered" >      throw new Error('element is not form');</span>
    }
&nbsp;
    // *** 値取得モード ***
<span class="cstat-no" title="statement not covered" >    var argLen = arguments.length;</span>
<span class="cstat-no" title="statement not covered" >    var isGet = ((argLen === 0) || (typeOf(name) === 'string' &amp;&amp; argLen === 1));</span>
<span class="cstat-no" title="statement not covered" >    if (isGet) {</span>
      // cheerio.serializeArray()だと値のない部品を拾ってくれないようなので自力でやる
<span class="cstat-no" title="statement not covered" >      var fieldInfo = {};</span>
<span class="cstat-no" title="statement not covered" >      $form.find('input,textarea,select').each(<span class="fstat-no" title="function not covered" >function (idx) {</span></span>
<span class="cstat-no" title="statement not covered" >        var $e = $(this);</span>
<span class="cstat-no" title="statement not covered" >        var name = $e.attr('name');</span>
<span class="cstat-no" title="statement not covered" >        var type = ($e.attr('type') || '').toLowerCase();</span>
<span class="cstat-no" title="statement not covered" >        var val = $e.val() || $e.attr('value');</span>
<span class="cstat-no" title="statement not covered" >        if (! name) {</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
        }
        // submit系要素はjavascriptでform.submit()した時にはパラメータとして付加しない
        // (ブラウザと同じ挙動)
<span class="cstat-no" title="statement not covered" >        if (cutil.inArray([ 'submit', 'image' ], type)) {</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
        }
<span class="cstat-no" title="statement not covered" >        fieldInfo[name] = fieldInfo[name] || {};</span>
<span class="cstat-no" title="statement not covered" >        fieldInfo[name].count = (fieldInfo[name].count || 0) + 1;</span>
<span class="cstat-no" title="statement not covered" >        fieldInfo[name].params = fieldInfo[name].params || [];</span>
&nbsp;
        // radioは複数同nameがあるのが普通なので設定値を配列にしない
<span class="cstat-no" title="statement not covered" >        if (type === 'radio' &amp;&amp; ! fieldInfo[name].force) {</span>
<span class="cstat-no" title="statement not covered" >          fieldInfo[name].force = 'single';</span>
        }
        // selectでmultipleの場合は強制的に設定値を配列にする
<span class="cstat-no" title="statement not covered" >        if ($e.is('select') &amp;&amp; $e.attr('multiple') &amp;&amp; ! fieldInfo[name].force) {</span>
<span class="cstat-no" title="statement not covered" >          fieldInfo[name].force = 'multi';</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (cutil.inArray([ 'checkbox', 'radio' ], type) &amp;&amp; ! $e.attr('checked')) {</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
        }
<span class="cstat-no" title="statement not covered" >        if (typeOf(val) === 'array') {</span>
<span class="cstat-no" title="statement not covered" >          fieldInfo[name].params = fieldInfo[name].params.concat(val);</span>
        } else {
<span class="cstat-no" title="statement not covered" >          fieldInfo[name].params.push(val);</span>
        }
      });
      // 複数同nameのcheckboxやmultipleのselect以外は値の配列化を解除
<span class="cstat-no" title="statement not covered" >      var fieldParams = {};</span>
<span class="cstat-no" title="statement not covered" >      each(fieldInfo, <span class="fstat-no" title="function not covered" >function (info, name) {</span></span>
<span class="cstat-no" title="statement not covered" >        fieldParams[name] = info.params;</span>
<span class="cstat-no" title="statement not covered" >        if (info.force !== 'multi' &amp;&amp; (info.force === 'single' || info.count === 1)) {</span>
<span class="cstat-no" title="statement not covered" >          fieldParams[name] = fieldParams[name].shift();</span>
        }
      });
&nbsp;
      // 引数未指定の場合はそのフォーム内の全要素のname:valueを連想配列で返す
<span class="cstat-no" title="statement not covered" >      return (argLen === 0) ? fieldParams : fieldParams[name];</span>
    }
&nbsp;
    // *** 値設定モード ***
<span class="cstat-no" title="statement not covered" >    var values = {};</span>
<span class="cstat-no" title="statement not covered" >    switch (typeOf(name)) {</span>
      case 'string': {
        // name: valueの連想配列化してvaluesにセット
<span class="cstat-no" title="statement not covered" >        values[name] = value;</span>
<span class="cstat-no" title="statement not covered" >        break;</span>
      }
      case 'object': {
<span class="cstat-no" title="statement not covered" >        values = name;</span>
        // 連想配列で指定した場合はvalueの位置にonNotFoundが入っているのでずらす
<span class="cstat-no" title="statement not covered" >        onNotFound = value;</span>
<span class="cstat-no" title="statement not covered" >        break;</span>
      }
      default: {
        // それ以外の型は受け付けない
<span class="cstat-no" title="statement not covered" >        throw new Error('name is not string or object');</span>
      }
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    each(values, <span class="fstat-no" title="function not covered" >function (v, k, o) {</span></span>
      // valueが関数で指定されている場合は実行して値ベースにそろえる
<span class="cstat-no" title="statement not covered" >      var realValue = (typeOf(v) === 'function') ? v() : v;</span>
&nbsp;
      // 同じnameで別部品とかあってもさすがにそれはフォーム側の問題な気がするので無視
<span class="cstat-no" title="statement not covered" >      var selector = [ 'input', 'textarea', 'select' ].map(<span class="fstat-no" title="function not covered" >function (s) {</span></span>
<span class="cstat-no" title="statement not covered" >        return s + '[name="' + k + '"]';</span>
      }).join(',');
<span class="cstat-no" title="statement not covered" >      var $parts = $form.find(selector);</span>
<span class="cstat-no" title="statement not covered" >      var pType = $parts.attr('type');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      if ($parts.length === 0) {</span>
        // nameに該当する部品が見つからない場合はonNotFoundに従う
<span class="cstat-no" title="statement not covered" >        if (onNotFound === 'append') {</span>
          // append: 新規に要素を作成してフォームに付加
<span class="cstat-no" title="statement not covered" >          var iType = 'hidden';</span>
<span class="cstat-no" title="statement not covered" >          if (typeOf(realValue) === 'array') {</span>
            // 値が配列: checkbox
<span class="cstat-no" title="statement not covered" >            iType = 'checkbox';</span>
          } else {
            // 値が文字列: hidden
<span class="cstat-no" title="statement not covered" >            realValue = [ realValue ];</span>
          }
<span class="cstat-no" title="statement not covered" >          each(realValue, <span class="fstat-no" title="function not covered" >function (val) {</span></span>
<span class="cstat-no" title="statement not covered" >            var $input = $('&lt;input/&gt;').attr({ type: iType, name: k, value: val });</span>
<span class="cstat-no" title="statement not covered" >            if (iType === 'checkbox') {</span>
<span class="cstat-no" title="statement not covered" >              $input.attr('checked', 'checked');</span>
            }
<span class="cstat-no" title="statement not covered" >            $form.append($input);</span>
          });
<span class="cstat-no" title="statement not covered" >          return;</span>
        }
<span class="cstat-no" title="statement not covered" >        if (onNotFound === 'throw') {</span>
          // throw: エラー
<span class="cstat-no" title="statement not covered" >          throw new Error('Element named "' + k + '" could not be found in this form');</span>
        }
      }
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (cutil.inArray([ 'checkbox', 'radio' ], pType)) {</span>
        // radioの場合は指定したvalueが該当しなければ何もしない
<span class="cstat-no" title="statement not covered" >        if (pType === 'radio') {</span>
<span class="cstat-no" title="statement not covered" >          realValue = String(realValue);</span>
<span class="cstat-no" title="statement not covered" >          var partsValues = $parts.map(<span class="fstat-no" title="function not covered" >function (idx) {</span></span>
<span class="cstat-no" title="statement not covered" >            return $(this).val();</span>
          }).get();
<span class="cstat-no" title="statement not covered" >          if (! cutil.inArray(partsValues, realValue)) {</span>
<span class="cstat-no" title="statement not covered" >            return;</span>
          }
        }
&nbsp;
        // tick/untickで値を操作
<span class="cstat-no" title="statement not covered" >        if (typeOf(realValue) !== 'array') {</span>
<span class="cstat-no" title="statement not covered" >          realValue = [ realValue ];</span>
        }
<span class="cstat-no" title="statement not covered" >        $parts.untick().each(<span class="fstat-no" title="function not covered" >function (idx) {</span></span>
<span class="cstat-no" title="statement not covered" >          if (cutil.inArray(realValue, $(this).val())) {</span>
<span class="cstat-no" title="statement not covered" >            $(this).tick();</span>
          }
        });
<span class="cstat-no" title="statement not covered" >        return;</span>
      }
&nbsp;
<span class="cstat-no" title="statement not covered" >      $parts.val(realValue);</span>
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    return this;</span>
  };
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Fri Apr 21 2017 09:52:48 GMT+0000 (UTC)</div>
</div>
</body>
</html>
