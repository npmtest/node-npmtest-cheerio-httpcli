<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-cheerio-httpcli/node_modules/cheerio-httpcli/lib/client.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-cheerio-httpcli">npmtest-cheerio-httpcli (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-cheerio-httpcli/node_modules/cheerio-httpcli/lib/client.js</span></h1>
    <h2>
        
        Statements: <span class="metric">7.41% <small>(16 / 216)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 146)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">3.85% <small>(1 / 26)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">7.41% <small>(16 / 216)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-cheerio-httpcli/node_modules/cheerio-httpcli/lib/</a> &#187; client.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*jshint -W100*/
&nbsp;
'use strict';
&nbsp;
var request    = require('request');
var urlParser  = require('url');
var RSVP       = require('rsvp');
var each       = require('foreach');
var typeOf     = require('type-of');
var assign     = require('object-assign');
var prettyjson = require('prettyjson');
var constants  = require('constants');
var spawnSync  = require('spawn-sync');
var path       = require('path');
var cutil      = require('./cheerio/util');
// os-localeは最初に実行した段階で結果をcacheに持つので
// fetch()前に別のモジュールがos-localeを実行していた場合に
// オプション内容によっては予期しない結果が返ることがある
var requireUncached = require('require-uncached');
var osLocale        = requireUncached('os-locale');
&nbsp;
/**
 * &lt;meta[http-equiv=refresh]&gt;からURLを取得する正規表現
 */
var reMetaRefresh = {
  /*eslint-disable key-spacing*/
  comment : /&lt;!--[\s\S]*?--&gt;/g,
  tag     : /&lt;\s*meta\s[\s\S]*http-equiv\s*=\s*["']?refresh["']?[\s\S]*?&gt;/i,
  url     : /\d\s*;\s*URL\s*=\s*["']?\s*(.*?)["'\s&gt;]/i
  /*eslint-enable key-spacing*/
};
&nbsp;
/**
 * http(s)リクエスト処理メインモジュール
 */
module.exports = {
  /**
   * プロパティ
   */
&nbsp;
  /*eslint-disable key-spacing*/
  core     : null,          // cheerio-httpcli本体
  encoding : null,          // encodingモジュール
  cheerio  : null,          // 拡張cheerioオブジェクト
  engine   : request,       // requestモジュール
  jar      : request.jar(), // クッキー
  /*eslint-enable key-spacing*/
&nbsp;
  /**
   * メソッド
   */
&nbsp;
  /**
   * プロパティや内部情報の初期化
   */
  reset: function () {
    // クッキーオブジェクト作り直し
    this.jar = request.jar();
  },
&nbsp;
  /**
   * promise/callbackに両対応したエラー終了処理(promise実行後)
   *
   * @param err     Errorオブジェクトもしくはエラーメッセージ文字列
   * @param options prepareで作成したオプション情報
   * @param extra   Errorオブジェクトに追加する情報
   * @param result  処理結果オブジェクト
   * @param reject  (promise処理時のみ)reject関数
   */
  fail: <span class="fstat-no" title="function not covered" >function (err, options, extra, result, reject) {</span>
<span class="cstat-no" title="statement not covered" >    extra = extra || {};</span>
<span class="cstat-no" title="statement not covered" >    result = result || {};</span>
<span class="cstat-no" title="statement not covered" >    var error = (err instanceof Error) ? err : new Error(err);</span>
<span class="cstat-no" title="statement not covered" >    if (options.param.uri) {</span>
<span class="cstat-no" title="statement not covered" >      error.url = options.param.uri;</span>
    }
<span class="cstat-no" title="statement not covered" >    if (options.param.form) {</span>
<span class="cstat-no" title="statement not covered" >      error.param = options.param.form;</span>
    } else <span class="cstat-no" title="statement not covered" >if (options.param.qs) {</span>
<span class="cstat-no" title="statement not covered" >      error.param = options.param.qs;</span>
    }
<span class="cstat-no" title="statement not covered" >    each(extra, <span class="fstat-no" title="function not covered" >function (exVal, exKey) {</span></span>
<span class="cstat-no" title="statement not covered" >      if (typeOf(exVal) !== 'undefined') {</span>
<span class="cstat-no" title="statement not covered" >        error[exKey] = exVal;</span>
      }
    });
&nbsp;
    // callback形式
<span class="cstat-no" title="statement not covered" >    if (typeOf(options.callback) === 'function') {</span>
<span class="cstat-no" title="statement not covered" >      return options.callback(error, result.$, result.response, result.body);</span>
    }
&nbsp;
    // promise形式
<span class="cstat-no" title="statement not covered" >    if (reject) {</span>
<span class="cstat-no" title="statement not covered" >      each(result, <span class="fstat-no" title="function not covered" >function (val, name) {</span></span>
<span class="cstat-no" title="statement not covered" >        if (typeOf(val) !== 'undefined') {</span>
<span class="cstat-no" title="statement not covered" >          error[name] = val;</span>
        }
      });
<span class="cstat-no" title="statement not covered" >      return reject(error);</span>
    }
&nbsp;
    // 同期処理
<span class="cstat-no" title="statement not covered" >    result.error = error;</span>
<span class="cstat-no" title="statement not covered" >    return result;</span>
  },
&nbsp;
  /**
   * promise/callbackに両対応したエラー終了処理(promise実行前)
   *
   * @param err     Errorオブジェクトもしくはエラーメッセージ文字列
   * @param options prepareで作成したオプション情報
   * @param extra   Errorオブジェクトに追加する情報
   * @param result  処理結果オブジェクト
   * @param reject  (promise処理時のみ)reject関数
   */
  error: <span class="fstat-no" title="function not covered" >function (err, options, extra, result) {</span>
<span class="cstat-no" title="statement not covered" >    extra = extra || {};</span>
<span class="cstat-no" title="statement not covered" >    result = result || {};</span>
&nbsp;
    // callback形式 or 同期処理
<span class="cstat-no" title="statement not covered" >    if (typeOf(options.callback) === 'function' || options.callback === 'sync') {</span>
<span class="cstat-no" title="statement not covered" >      return this.fail(err, options, extra, result);</span>
    }
&nbsp;
    // promise形式(promiseオブジェクトを返す)
<span class="cstat-no" title="statement not covered" >    return new RSVP.Promise((<span class="fstat-no" title="function not covered" >function (resolve, reject) {</span></span>
<span class="cstat-no" title="statement not covered" >      return this.fail(err, options, extra, result, reject);</span>
    }).bind(this));
  },
&nbsp;
  /**
   * レスポンスからリダイレクト先のURLを取得
   *
   * @param res      requestモジュールで取得したレスポンスオブジェクト
   * @param body     コンテンツのBuffer
   * @return string リダイレクト先のURL(なければnull)
   */
  checkRedirect: <span class="fstat-no" title="function not covered" >function (res, body) {</span>
    // POST後のリダイレクトはrequestモジュールでは自動で飛んでくれない(と思う)
<span class="cstat-no" title="statement not covered" >    if (/^30\d$/.test(res.statusCode) &amp;&amp; res.headers.location) {</span>
<span class="cstat-no" title="statement not covered" >      return urlParser.resolve(res.request.uri.href, res.headers.location);</span>
    }
&nbsp;
    // ここから先はHTMLの場合のみ
<span class="cstat-no" title="statement not covered" >    if (! this.core.followMetaRefresh || ! /html/.test(res.headers['content-type'])) {</span>
<span class="cstat-no" title="statement not covered" >      return null;</span>
    }
&nbsp;
    // METAタグのrefreshがHTML内にあればリダイレクト
    // IEの時だけリダイレクトとか考慮するのが面倒なのでコメントは全部削除
<span class="cstat-no" title="statement not covered" >    var chkBody = (body || '').toString('utf-8').replace(reMetaRefresh.comment, '');</span>
<span class="cstat-no" title="statement not covered" >    var metaRefresh = chkBody.match(reMetaRefresh.tag);</span>
<span class="cstat-no" title="statement not covered" >    if (metaRefresh) {</span>
<span class="cstat-no" title="statement not covered" >      var refreshUrl = (metaRefresh[0].match(reMetaRefresh.url) || [])[1];</span>
      // refreshのURLが相対パスの場合があるので絶対パス化
<span class="cstat-no" title="statement not covered" >      return urlParser.resolve(res.request.uri.href, refreshUrl);</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    return null;</span>
  },
&nbsp;
  /**
   * リクエスト処理
   *
   * @param param    requestモジュールでのhttpアクセス時に指定するパラメータ
   * @param retry    内部処理用引数(リトライ回数)
   * @param callback リクエスト完了時のコールバック関数(err, response, body(buffer))
   */
  request: <span class="fstat-no" title="function not covered" >function (param, retry, callback) {</span>
<span class="cstat-no" title="statement not covered" >    if (typeOf(retry) === 'function') {</span>
<span class="cstat-no" title="statement not covered" >      callback = retry;</span>
<span class="cstat-no" title="statement not covered" >      retry = 0;</span>
    }
&nbsp;
    // レスポンスのサイズを計測するためのバッファ
<span class="cstat-no" title="statement not covered" >    var buffer = '';</span>
<span class="cstat-no" title="statement not covered" >    var maxDataSize = this.core.maxDataSize;</span>
&nbsp;
    // リクエスト実行
<span class="cstat-no" title="statement not covered" >    var req = request(param, (<span class="fstat-no" title="function not covered" >function (err, res, body) {</span></span>
<span class="cstat-no" title="statement not covered" >      if (err) {</span>
<span class="cstat-no" title="statement not covered" >        if (callback) {</span>
<span class="cstat-no" title="statement not covered" >          callback(err, res, body);</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
        }
<span class="cstat-no" title="statement not covered" >        req.emit('error', err);</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
      }
&nbsp;
      // requestモジュールが対応していないタイプのリダイレクトチェック
<span class="cstat-no" title="statement not covered" >      var location = this.checkRedirect(res, body);</span>
<span class="cstat-no" title="statement not covered" >      if (location) {</span>
<span class="cstat-no" title="statement not covered" >        retry = retry || 0;</span>
<span class="cstat-no" title="statement not covered" >        if (retry &gt; 5) {</span>
<span class="cstat-no" title="statement not covered" >          err = new Error('redirect limit over');</span>
<span class="cstat-no" title="statement not covered" >          if (callback) {</span>
<span class="cstat-no" title="statement not covered" >            callback(err, res, body);</span>
<span class="cstat-no" title="statement not covered" >            return;</span>
          }
<span class="cstat-no" title="statement not covered" >          req.emit('error', err);</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
        }
&nbsp;
        // パラメータの調整
<span class="cstat-no" title="statement not covered" >        if (! /^30\d$/.test(res.statusCode)) {</span>
          // METAタグrefreshの場合はリファラーを更新
<span class="cstat-no" title="statement not covered" >          param.headers.Referer = param.uri;</span>
        }
<span class="cstat-no" title="statement not covered" >        var parsed = urlParser.parse(location);</span>
<span class="cstat-no" title="statement not covered" >        param.headers.Host = parsed.host;</span>
<span class="cstat-no" title="statement not covered" >        param.uri = location;</span>
<span class="cstat-no" title="statement not covered" >        param.method = 'GET';</span>
<span class="cstat-no" title="statement not covered" >        delete param.form;</span>
<span class="cstat-no" title="statement not covered" >        delete param.qs;</span>
<span class="cstat-no" title="statement not covered" >        this.request(param, retry + 1, callback);</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
      }
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (callback) {</span>
<span class="cstat-no" title="statement not covered" >        callback(null, res, body);</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
      }
    }).bind(this)).on('data', <span class="fstat-no" title="function not covered" >function (chunk) {</span>
<span class="cstat-no" title="statement not covered" >      if (maxDataSize !== null) {</span>
        // バッファにチャンクを追加
<span class="cstat-no" title="statement not covered" >        buffer += chunk;</span>
&nbsp;
        // 制限を超過したら中止
<span class="cstat-no" title="statement not covered" >        if (buffer.length &gt; maxDataSize) {</span>
<span class="cstat-no" title="statement not covered" >          req.abort();</span>
<span class="cstat-no" title="statement not covered" >          callback(new Error('data size limit over'));</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
        }
      }
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    return req;</span>
  },
&nbsp;
  /**
   * 非同期http通信処理本体
   *
   * @param options prepareで作成したオプション情報
   * @param resolve (promise処理時のみ)resolve関数
   * @param reject  (promise処理時のみ)reject関数
   */
  execute: <span class="fstat-no" title="function not covered" >function (options, resolve, reject) {</span>
    // リクエスト実行
<span class="cstat-no" title="statement not covered" >    this.request(options.param, (<span class="fstat-no" title="function not covered" >function (err, res, body) {</span></span>
      // レスポンスから処理結果オブジェクト作成
<span class="cstat-no" title="statement not covered" >      var obj = this.responseToResult(err, res, body, options);</span>
<span class="cstat-no" title="statement not covered" >      if (obj.err) {</span>
<span class="cstat-no" title="statement not covered" >        this.fail(obj.err, options, obj.extra, obj.result, reject);</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
      }
&nbsp;
      // promise処理時とcallback処理時で処理の返し方を切り替え
<span class="cstat-no" title="statement not covered" >      var result = obj.result;</span>
<span class="cstat-no" title="statement not covered" >      if (typeOf(options.callback) === 'function') {</span>
<span class="cstat-no" title="statement not covered" >        options.callback(result.error, result.$, result.response, result.body);</span>
      } else {
<span class="cstat-no" title="statement not covered" >        resolve(result);</span>
      }
    }).bind(this));
  },
&nbsp;
  /**
   * リクエストオプションからクッキー連想配列を作成
   *
   * @param options prepareで作成したオプション情報
   * @return {名前: 値}のクッキー連想配列
   */
  getCookiesFromOption: <span class="fstat-no" title="function not covered" >function (options) {</span>
<span class="cstat-no" title="statement not covered" >    var cookies = {};</span>
<span class="cstat-no" title="statement not covered" >    each(options.param.jar.getCookies(options.param.uri), <span class="fstat-no" title="function not covered" >function (c) {</span></span>
<span class="cstat-no" title="statement not covered" >      cookies[c.key] = c.value;</span>
    });
<span class="cstat-no" title="statement not covered" >    return cookies;</span>
  },
&nbsp;
  /**
   * 同期http通信処理本体
   *
   * @param options prepareで作成したオプション情報
   * @return リクエスト処理結果オブジェクト
   *         {
   *           err:      request処理結果のerr
   *           $:        request処理結果のbodyをcheerioでパースしたオブジェクト
   *           response: toJSON()したrequest処理結果のres
   *           body:     UTF-8化したrequest処理結果のbody
   *         }
   */
  executeSync: <span class="fstat-no" title="function not covered" >function (options) {</span>
<span class="cstat-no" title="statement not covered" >    var args = {</span>
      param: options.param,
      core: {},
      cookies: this.getCookiesFromOption(options)
    };
&nbsp;
    // jarはJSON化せず別途cookie付加するのでここではセットしない
<span class="cstat-no" title="statement not covered" >    delete args.param.jar;</span>
&nbsp;
    // workerに渡すcoreオプション取得(関数やdownloadオブジェクトは渡さない)
<span class="cstat-no" title="statement not covered" >    each(this.core, <span class="fstat-no" title="function not covered" >function (val, key) {</span></span>
<span class="cstat-no" title="statement not covered" >      if (typeOf(val) !== 'function' &amp;&amp; key !== 'download') {</span>
<span class="cstat-no" title="statement not covered" >        args.core[key] = val;</span>
      }
    });
&nbsp;
    // spawnSyncでworker.jsでリクエスト処理を行う
<span class="cstat-no" title="statement not covered" >    var worker = [ path.join(__dirname, 'worker.js') ];</span>
<span class="cstat-no" title="statement not covered" >    var result = spawnSync(process.execPath, worker, {</span>
      input: JSON.stringify(args),
      encoding: 'utf-8'
    });
<span class="cstat-no" title="statement not covered" >    var message = (result.status === 0) ? result.stderr : null;</span>
&nbsp;
    // worker.jsが出力したJSONを取得して処理結果オブジェクトを作成
<span class="cstat-no" title="statement not covered" >    var json = {};</span>
<span class="cstat-no" title="statement not covered" >    try {</span>
<span class="cstat-no" title="statement not covered" >      json = JSON.parse(result.stdout);</span>
    } catch (e) {
<span class="cstat-no" title="statement not covered" >      message = 'An error occurred during the sync request: ' + e.message;</span>
    }
&nbsp;
    // worker.jsのjarが取得したcookieをこちらのjarにセット
<span class="cstat-no" title="statement not covered" >    var Cookie = require('tough-cookie').Cookie;</span>
<span class="cstat-no" title="statement not covered" >    if (json.response &amp;&amp; typeOf(json.cookies) === 'array') {</span>
<span class="cstat-no" title="statement not covered" >      each(json.cookies, (<span class="fstat-no" title="function not covered" >function (c) {</span></span>
<span class="cstat-no" title="statement not covered" >        this.jar.setCookie(</span>
          Cookie.fromJSON(c).toString(),
          json.response.request.uri.href
        );
      }).bind(this));
    }
<span class="cstat-no" title="statement not covered" >    options.param.jar = this.jar;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var err = (message) ? new Error(message) : null;</span>
<span class="cstat-no" title="statement not covered" >    var body = (json.body) ? new Buffer(json.body) : null;</span>
<span class="cstat-no" title="statement not covered" >    var obj = this.responseToResult(err, json.response, body, options);</span>
<span class="cstat-no" title="statement not covered" >    if (obj.err) {</span>
<span class="cstat-no" title="statement not covered" >      return this.fail(obj.err, options, obj.extra, obj.result);</span>
    }
<span class="cstat-no" title="statement not covered" >    return obj.result;</span>
  },
&nbsp;
  /**
   * request処理で取得したresponoseオブジェクトから処理結果オブジェクト作成
   *
   * @param err     request処理結果のerr
   * @param res     request処理結果のres
   * @param body    request処理結果のbody
   * @param options prepareで作成したオプション情報
   * @return 処理結果オブジェクトおよび処理過程で発生したエラー情報
   *         {
   *           err:    エラーオブジェクト or エラー文字列
   *           extra:  処理結果エラーオブジェクトに付加する追加情報
   *           result: 処理結果オブジェクト
   *         }
   */
  responseToResult: <span class="fstat-no" title="function not covered" >function (err, res, body, options) {</span>
    // 処理結果格納先
<span class="cstat-no" title="statement not covered" >    var result = {};</span>
&nbsp;
    // クッキー取得
<span class="cstat-no" title="statement not covered" >    if (res) {</span>
<span class="cstat-no" title="statement not covered" >      res.cookies = this.getCookiesFromOption(options);</span>
<span class="cstat-no" title="statement not covered" >      Object.freeze(res.cookies);</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    result.response = res;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (err) {</span>
<span class="cstat-no" title="statement not covered" >      return {</span>
        err: err,
        result: result
      };
    }
<span class="cstat-no" title="statement not covered" >    if ((body || []).length === 0) {</span>
<span class="cstat-no" title="statement not covered" >      return {</span>
        err: 'no content',
        extra: { statusCode: res.statusCode },
        result: result
      };
    }
&nbsp;
    // Buffer状態のHTMLコンテンツからエンコーディングを判定してUTF-8に変換
<span class="cstat-no" title="statement not covered" >    var enc = options.encode || this.encoding.detect(body);</span>
<span class="cstat-no" title="statement not covered" >    if (enc) {</span>
<span class="cstat-no" title="statement not covered" >      enc = enc.toLowerCase();</span>
<span class="cstat-no" title="statement not covered" >      try {</span>
<span class="cstat-no" title="statement not covered" >        body = this.encoding.convert(enc, body);</span>
      } catch (e) {
<span class="cstat-no" title="statement not covered" >        return {</span>
          err: e,
          extra: { charset: enc },
          result: result
        };
      }
    }
<span class="cstat-no" title="statement not covered" >    result.body = body.toString('utf8');</span>
&nbsp;
    // cheerioでHTMLコンテンツをパース &amp; 現在のページ情報を追加
<span class="cstat-no" title="statement not covered" >    var cheerioOpt = {</span>
      decodeEntities: true,
      xmlMode: (! this.core.forceHtml &amp;&amp; (
        (res &amp;&amp; /[\/\+]xml\b/.test(res.headers['content-type'])) ||
        /\.(rss|rdf|atom|opml|xslt?)\b/.test(options.param.uri)
        // Content-Typeか拡張子でXMLであると判別された場合はxmlModeをON
      ))
    };
<span class="cstat-no" title="statement not covered" >    result.$ = this.cheerio.load(result.body, cheerioOpt);</span>
<span class="cstat-no" title="statement not covered" >    result.$._root._documentInfo = {</span>
      url: res.request.uri.href,
      encoding: enc,
      isXml: cheerioOpt.xmlMode
    };
<span class="cstat-no" title="statement not covered" >    result.$.documentInfo = <span class="fstat-no" title="function not covered" >function () {</span></span>
<span class="cstat-no" title="statement not covered" >      return this._root._documentInfo;</span>
    };
&nbsp;
    // 素の$.htmlはエンティティ化してしまうので退避
<span class="cstat-no" title="statement not covered" >    result.$.entityHtml = result.$.html;</span>
<span class="cstat-no" title="statement not covered" >    result.$.html = <span class="fstat-no" title="function not covered" >function () {</span></span>
<span class="cstat-no" title="statement not covered" >      return cutil.decodeEntities(</span>
        this.entityHtml.apply(this, Array.prototype.slice.call(arguments))
      );
    };
&nbsp;
    // HTMLが取得できてもレスポンスステータスが20xでない場合(ソフト404など)はエラーとして処理する
<span class="cstat-no" title="statement not covered" >    if (String(res.statusCode).substr(0, 2) !== '20') {</span>
<span class="cstat-no" title="statement not covered" >      return {</span>
        err: 'server status',
        extra: { statusCode: res.statusCode },
        result: result
      };
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (this.core.referer) {</span>
      // 次のリクエスト時に今アクセスしたURLをRefererとする
<span class="cstat-no" title="statement not covered" >      this.core.headers.Referer = result.$._root._documentInfo.url;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    return { result: result };</span>
  },
&nbsp;
  /**
   * デフォルトのリクエストヘッダに指定したヘッダが存在するかチェック
   *
   * @param header  リクエストヘッダ名
   * @return true or false
   */
  hasHeader: <span class="fstat-no" title="function not covered" >function (header) {</span>
<span class="cstat-no" title="statement not covered" >    header = header.toLowerCase();</span>
<span class="cstat-no" title="statement not covered" >    return (Object.keys(this.core.headers).filter(<span class="fstat-no" title="function not covered" >function (h) {</span></span>
<span class="cstat-no" title="statement not covered" >      return (h.toLowerCase() === header);</span>
    }).length &gt; 0);
  },
&nbsp;
  /**
   * リクエスト時に必要なオプション情報を作成
   *
   * @param method   リクエストメソッド
   * @param url      リクエスト先のURL
   * @param param    リクエストパラメータ
   * @param encode   取得先のHTMLのエンコーディング(default: 自動判定)
   * @param callback リクエスト完了時のコールバック関数(err, cheerio, response, body)
   * @return オプション情報オブジェクト
   */
  prepare: <span class="fstat-no" title="function not covered" >function (method, url, param, encode, callback) {</span>
    // 省略されている引数に合わせて調整
<span class="cstat-no" title="statement not covered" >    if (typeOf(encode) === 'function') {</span>
<span class="cstat-no" title="statement not covered" >      callback = encode;</span>
<span class="cstat-no" title="statement not covered" >      encode = null;</span>
    } else <span class="cstat-no" title="statement not covered" >if (typeOf(param) === 'function') {</span>
<span class="cstat-no" title="statement not covered" >      callback = param;</span>
<span class="cstat-no" title="statement not covered" >      param = null;</span>
<span class="cstat-no" title="statement not covered" >      encode = null;</span>
    }
<span class="cstat-no" title="statement not covered" >    if (! encode &amp;&amp; typeOf(param) === 'string' &amp;&amp; param.indexOf('=') === -1) {</span>
      // 第3引数が文字列でパラメータの指定でもない =&gt; paramが省略されてencodeが指定されている
<span class="cstat-no" title="statement not covered" >      encode = param;</span>
<span class="cstat-no" title="statement not covered" >      param = null;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    var cli = this.core;</span>
&nbsp;
    // デフォルトはChromeとして振る舞う
<span class="cstat-no" title="statement not covered" >    if (! this.hasHeader('User-Agent')) {</span>
<span class="cstat-no" title="statement not covered" >      cli.setBrowser('chrome');</span>
    }
&nbsp;
    // OSのロケールからAcceptLanguageを設定
<span class="cstat-no" title="statement not covered" >    if (! this.hasHeader('Accept-Language')) {</span>
<span class="cstat-no" title="statement not covered" >      try {</span>
        // spawn: trueだとexecFileSyncを使うのでできればfalseにしたいが
        // windowsだとロケールを取得できる確実な環境変数がなさそう
<span class="cstat-no" title="statement not covered" >        var locale = osLocale.sync({ spawn: (process.platform === 'win32') });</span>
<span class="cstat-no" title="statement not covered" >        if (locale) {</span>
<span class="cstat-no" title="statement not covered" >          locale = locale.replace(/_/g, '-');</span>
          // en-USだとロケール取得に失敗した可能性があるので何もしない
<span class="cstat-no" title="statement not covered" >          if (locale !== 'en-US') {</span>
<span class="cstat-no" title="statement not covered" >            cli.headers['Accept-Language'] = locale.replace(/_/g, '-') + ',en-US';</span>
          }
        }
      } catch (/*eslint-disable no-unused-vars*/ e /*eslint-enable no-unused-vars*/) {
        // ロケールが取得できない場合は何もしない
      }
    }
&nbsp;
    // Acceptヘッダにそれっぽいのを付加しておく
<span class="cstat-no" title="statement not covered" >    if (! this.hasHeader('Accept')) {</span>
<span class="cstat-no" title="statement not covered" >      cli.headers.Accept = 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8';</span>
    }
&nbsp;
    // リクエストヘッダ作成
<span class="cstat-no" title="statement not covered" >    var parsed = urlParser.parse(url);</span>
<span class="cstat-no" title="statement not covered" >    var reqHeader = assign({ Host: parsed.host }, cli.headers);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var options = {</span>
      param: {
        uri: url,
        method: method,
        encoding: null,  // Bufferでコンテンツを取得する
        headers: reqHeader,
        timeout: cli.timeout,
        gzip: cli.gzip,
        time: true,
        followRedirect: true,
        jar: this.jar,
        secureOptions: constants.SSL_OP_NO_TLSv1_2  // とりあえず付けてみた
      },
      encode: encode,
      callback: callback
    };
&nbsp;
<span class="cstat-no" title="statement not covered" >    if ((typeOf(param) === 'object' &amp;&amp; Object.keys(param).length &gt; 0) || (param || '').length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >      options.param[(method === 'GET') ? 'qs' : 'form'] = param;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    return options;</span>
  },
&nbsp;
  /**
   * リクエスト処理スタート
   *
   * @param method   リクエストメソッド
   * @param url      リクエスト先のURL
   * @param param    リクエストパラメータ
   * @param encode   取得先のHTMLのエンコーディング(default: 自動判定)
   * @param callback リクエスト完了時のコールバック関数(err, cheerio, response, body)
   */
  run: <span class="fstat-no" title="function not covered" >function (method, url, param, encode, callback) {</span>
<span class="cstat-no" title="statement not covered" >    var isSync = false;</span>
<span class="cstat-no" title="statement not covered" >    if (callback === 'sync') {</span>
      // Electron上ではSync系メソッドはサポート外
      // ※process.execPathで別スクリプトを実行する性質上
<span class="cstat-no" title="statement not covered" >      if (process.versions.electron) {</span>
<span class="cstat-no" title="statement not covered" >        throw new Error('sync request is not support on Electron');</span>
      }
&nbsp;
<span class="cstat-no" title="statement not covered" >      isSync = true;</span>
<span class="cstat-no" title="statement not covered" >      callback = null;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    var options = this.prepare(method, url, param, encode, callback);</span>
&nbsp;
    // デバッグ情報
<span class="cstat-no" title="statement not covered" >    if (this.core.debug) {</span>
<span class="cstat-no" title="statement not covered" >      var label = '[DEBUG]';</span>
<span class="cstat-no" title="statement not covered" >      var debugParams = {};</span>
<span class="cstat-no" title="statement not covered" >      debugParams[label] = {};</span>
<span class="cstat-no" title="statement not covered" >      each([ 'uri', 'method', 'headers', 'qs', 'form' ], <span class="fstat-no" title="function not covered" >function (v) {</span></span>
<span class="cstat-no" title="statement not covered" >        if (options.param[v]) {</span>
<span class="cstat-no" title="statement not covered" >          debugParams[label][v] = options.param[v];</span>
        }
      });
<span class="cstat-no" title="statement not covered" >      var cookies = this.getCookiesFromOption(options);</span>
<span class="cstat-no" title="statement not covered" >      if (Object.keys(cookies).length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >        debugParams[label].cookies = cookies;</span>
      }
<span class="cstat-no" title="statement not covered" >      process.stderr.write(prettyjson.render(debugParams) + '\n\n');</span>
    }
&nbsp;
    // 同期処理
<span class="cstat-no" title="statement not covered" >    if (isSync) {</span>
<span class="cstat-no" title="statement not covered" >      return this.executeSync(options);</span>
    }
&nbsp;
    // 非同期処理
<span class="cstat-no" title="statement not covered" >    if (typeOf(options.callback) !== 'function') {</span>
      // callbackを指定しなかった場合はpromiseオブジェクトを返す
<span class="cstat-no" title="statement not covered" >      return new RSVP.Promise((<span class="fstat-no" title="function not covered" >function (resolve, reject) {</span></span>
<span class="cstat-no" title="statement not covered" >        this.execute(options, resolve, reject);</span>
      }).bind(this));
    }
<span class="cstat-no" title="statement not covered" >    this.execute(options);</span>
    /*eslint-disable consistent-return*/ <span class="cstat-no" title="statement not covered" >return; </span>/*eslint-enable consistent-return*/
  }
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Fri Apr 21 2017 09:51:34 GMT+0000 (UTC)</div>
</div>
</body>
</html>
